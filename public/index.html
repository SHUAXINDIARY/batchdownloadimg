<html>
    <head>
        <title>Express</title>
        <link rel="stylesheet" href="/stylesheets/ui.css" />
        <link rel="stylesheet" href="/stylesheets/style.css" />
    </head>

    <body>
        <div id="app" v-cloak>
            <h1>图片批量下载</h1>
            <br />
            <button id="uplodBtn" @click="send">上传</button>
            <input
                ref="upload"
                id="file"
                type="file"
                name="file1"
                @change="saveFile"
            />
            <br />
            <button
                type="primary"
                v-if="state.file && state.data.length > 0"
                @click="handleClear"
            >
                清除
            </button>
            <button
                type="primary"
                v-if="state.file && state.data.length > 0"
                @click="dowAll"
            >
                批量下载
            </button>
            <hr />
            <table>
                <thead>
                    <tr>
                        <th>序号</th>
                        <th>名称</th>
                        <th>url</th>
                        <th>下载</th>
                    </tr>
                </thead>
                <tbody>
                    <template v-if="state.data.length > 0">
                        <tr v-for="(item,index) of state.data">
                            <td key="index">{{index}}</td>
                            <td key="index">{{item.object}}</td>
                            <td key="index">
                                <button type="primary">
                                    <a :href="item.url" target="_blank">查看</a>
                                </button>
                            </td>
                            <td>
                                <button type="primary" @click="() => dow(item)">
                                    下载
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template v-else>
                        <tr>
                            <td colspan="4">暂无数据</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
        <script src="https://unpkg.com/vue@next"></script>
        <script src="javascripts/index.js"></script>
    </body>
</html>
